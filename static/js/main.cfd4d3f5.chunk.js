(this["webpackJsonpdistr-front"]=this["webpackJsonpdistr-front"]||[]).push([[0],{265:function(t,e){},288:function(t,e){},290:function(t,e){},367:function(t,e){},369:function(t,e){},401:function(t,e){},406:function(t,e){},408:function(t,e){},415:function(t,e){},428:function(t,e){},519:function(t,e,n){"use strict";n.r(e);var r=n(8),c=n(9),i=n(14),s=n(13),a=n(16),o=n(0),u=n(85),d=n(543),b=n(241),f=n(548),l=n(240),h=n(540),j=n(544),p=n(545),m=n(542),v=n(89),x=n(140),w=n(25),O=n.n(w),g=n(90),k=n(232),y=n.n(k),B=n(233),_=BigInt(1e18),E=function(){function t(e,n){Object(r.a)(this,t),this.acc=BigInt(0),this.current=e,this.lastSeen=n}return Object(c.a)(t,[{key:"add",value:function(t,e,n){this._update(n,e),this.current+=t}},{key:"_add",value:function(t,e){this.lastSeen=e,this.current+=t}},{key:"_sub",value:function(t,e){this.lastSeen=e,this.current-=t}},{key:"sub",value:function(t,e,n){this._update(n,e),this.current-=t}},{key:"_update",value:function(t,e){if(e<this.lastSeen)throw new Error("downTime");var n=e-this.lastSeen;this.acc+=this.current*_/t*BigInt(n),this.lastSeen=e}},{key:"finalize",value:function(t,e){var n=t-this.lastSeen;return this.acc+this.current*_/e*BigInt(n)}}]),t}(),I=n(541),N=new B("wss://mainnet.infura.io/ws/v3/".concat("3c3dfdec6ce94abc935977aa995d1a8c")),S={distribution:new I.a([]),blockNumber:new I.a(""),setBalances:function(t){S.distribution.next(t)},setBlockNumber:function(t){S.blockNumber.next(t)}},P=N.utils.sha3("Transfer(address,address,uint256)"),z="0x49519631B404E06ca79C9C7b0dC91648D86F08db",C="0x"+"0".repeat(40),A=11731951,F=11717846,L=new Map,D=new E(BigInt(0),A);function J(){return M.apply(this,arguments)}function M(){return(M=Object(g.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.eth.getPastLogs({fromBlock:F,toBlock:A,address:z,topics:[P]});case 2:t.sent.forEach((function(t){var e="0x".concat(t.topics[1].substr(26)),n="0x".concat(t.topics[2].substr(26)),r=BigInt(t.data);if(e===C){D._add(r,A);var c=L.get(n);c?c._add(r,A):L.set(n,new E(r,A))}else if(n===C){D._sub(r,A);var i=L.get(e);if(!i)throw new Error("from unknown");i._sub(r,A)}else{var s=L.get(e);if(!s)throw new Error("from unknown");s._sub(r,A);var a=L.get(n);a?a._add(r,A):L.set(n,new E(r,A))}}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(t){return H.apply(this,arguments)}function H(){return(H=Object(g.a)(O.a.mark((function t(e){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.eth.getPastLogs({fromBlock:A,toBlock:e,address:z,topics:[P]});case 2:t.sent.forEach((function(t){return V(t)})),R(e);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(t){var e=function(t){var e=BigInt(t-A)*_,n=D.current;return Array.from(L.entries()).map((function(r){var c=Object(v.a)(r,2),i=c[0],s=c[1];return{address:i,distributionPercent:Number(s.finalize(t,n)*BigInt(1e6)/e)/1e4}})).sort((function(t,e){var n=t.distributionPercent,r=e.distributionPercent;return n<r?1:n>r?-1:0}))}(t);S.setBalances(e.map((function(t,e){return Object(x.a)(Object(x.a)({},t),{},{id:e+1})}))),S.setBlockNumber(t)}function V(t){var e="0x".concat(t.topics[1].substr(26)),n="0x".concat(t.topics[2].substr(26)),r=BigInt(t.data),c=t.blockNumber,i=D.current;if(e===C){!function(t,e){D._add(t,e)}(r,c);var s=L.get(n);s?s.add(r,c,i):L.set(n,new E(r,c)),q(i,c,[s])}else if(n===C){!function(t,e){D._sub(t,e)}(r,c);var a=L.get(e);if(!a)throw new Error("from unknown");a.sub(r,c,i),q(i,c,[a])}else{var o=L.get(e);if(!o)throw new Error("from unknown");o.sub(r,c,i);var u=L.get(n);u?u.add(r,c,i):L.set(n,new E(r,t.blockNumber))}}function q(t,e,n){Array.from(L.keys()).forEach((function(r){n.includes(r)||L.get(r)._update(t,e)}))}function G(){var t=!1;N.eth.subscribe("newBlockHeaders",(function(e,n){e||t||(t=!0,R(n.number),t=!1)})),N.eth.subscribe("logs",{address:z,topics:[P]},(function(e,n){e||(V(n),t||(t=!0,R(n.blockNumber),t=!1))}))}y.a.once(Object(g.a)(O.a.mark((function t(){var e;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.time("distr"),t.next=3,N.eth.getBlockNumber();case 3:return e=t.sent,t.next=6,J();case 6:return t.next=8,T(e);case 8:console.timeEnd("distr"),G();case 10:case"end":return t.stop()}}),t)}))))();var K=S;var Q=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=Object(o.useState)(e||t.getValue()),r=Object(v.a)(n,2),c=r[0],i=r[1];return Object(o.useEffect)((function(){var e=t.subscribe((function(t){i(t)}));return function(){return e.unsubscribe()}})),c},U=n(235),W=function(){var t=Q(K.distribution);return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(b.a,{align:"center",children:Object(a.jsx)(h.a,{columns:[{property:"id",header:Object(a.jsx)(j.a,{children:"#"}),primary:!0},{property:"address",header:Object(a.jsx)(j.a,{children:"Address"}),render:function(t){return Object(a.jsx)(j.a,{style:{fontFamily:"monospace",fontSize:U.isMobile?"8px":"12px"},children:t.address})}},{property:"distribution",header:"Distribution",render:function(t){return Object(a.jsxs)(p.a,{anchor:"center",children:[Object(a.jsx)(b.a,{children:Object(a.jsx)(m.a,{values:[{value:t.distributionPercent}],thickness:"medium",size:"medium"})}),Object(a.jsxs)(b.a,{direction:"row",align:"center",pad:{bottom:"xsmall"},children:[Object(a.jsx)(j.a,{size:"xlarge",weight:"bold",children:t.distributionPercent}),Object(a.jsx)(j.a,{size:"small",children:"%"})]})]})}}],data:t})})})},X=n(538),Y=n(546),Z=n(539),$=n(547),tt="".concat("/distribution","/component.png"),et=function(){var t=Q(K.blockNumber);return Object(a.jsxs)(X.a,{pad:"small",children:[Object(a.jsx)(Y.a,{src:tt}),Object(a.jsx)(Z.a,{direction:"row",children:Object(a.jsx)($.a,{label:"synced at block #".concat(t||"fetching")})})]})},nt=function(t){Object(i.a)(n,t);var e=Object(s.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(d.a,{theme:l.grommet,children:[Object(a.jsx)(et,{}),Object(a.jsx)(b.a,{align:"center",pad:{bottom:"large"},children:Object(a.jsx)(f.a,{level:"3",children:"Realtime Component LP rewards distribution"})}),Object(a.jsx)(W,{})]})}}]),n}(o.Component);Object(u.render)(Object(a.jsx)(nt,{}),document.getElementById("root"))}},[[519,1,2]]]);
//# sourceMappingURL=main.cfd4d3f5.chunk.js.map